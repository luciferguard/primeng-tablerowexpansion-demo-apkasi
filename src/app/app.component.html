<p-table [value]="products"  dataKey="name" styleClass="j2-datatable-sm  j2-datatable-blue  mx-3 my-3" responsiveLayout="scroll" [globalFilterFields]="['code','name','category','quantity']" sortMode="multiple">

  <ng-template pTemplate="header">
    <tr>
      <th style="width:40px;"> <p-checkbox [(ngModel)]="checked" [binary]="true" inputId="binary"></p-checkbox></th>
      <th style="width:40px;">&nbsp;</th>
      <th pSortableColumn="code" class="w-11rem">Code<p-columnFilter type="text" field="code" display="menu" ></p-columnFilter><p-sortIcon field="code"></p-sortIcon></th>
      <th class="w-15rem">Name <p-columnFilter type="text" field="name" display="menu"></p-columnFilter></th>
      <th class="w-10rem">Category</th>
      <th>Quantity_</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-product let-expanded="expanded">
    <tr>
      <td >
        <p-checkbox [(ngModel)]="checked" [binary]="true" inputId="binary"></p-checkbox>

      </td>
      <td >
        <button type="button" pButton pRipple [pRowToggler]="product" class="j2-button-text  j2-button-info h-auto" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
      </td>

      <td>{{product.code}}</td>
      <td>{{product.name}}</td>
      <td>{{product.category}}</td>
      <td>{{product.quantity}}</td>
    </tr>
  </ng-template>

  <ng-template pTemplate="rowexpansion" let-product>
    <tr class="j2-expand-table">
      <td colspan="7" class="pl-6 pr-3 py-3">
        
        <p-table [value]="product.orders" dataKey="id" class="j2-datatable-sm  j2-datatable-blue" responsiveLayout="scroll">
            <ng-template pTemplate="header">
              <tr>
                <th style="width:48px;"> <p-checkbox [(ngModel)]="checked" [binary]="true" inputId="binary"></p-checkbox></th>
                <th pSortableColumn="id" class="w-11rem">Id <p-sortIcon field="price"></p-sortIcon></th>
                <th pSortableColumn="customer" class="w-15rem">Customer <p-sortIcon field="customer"></p-sortIcon></th>
                <th pSortableColumn="date" class="w-10rem">Date <p-sortIcon field="date"></p-sortIcon></th>
                <th pSortableColumn="amount" class="w-10rem">Amount <p-sortIcon field="amount"></p-sortIcon></th>
                <th pSortableColumn="status" >Status <p-sortIcon field="status"></p-sortIcon></th>
                <th style="width: 4rem"></th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-order>
              <tr>
                <td>
                  <p-checkbox [(ngModel)]="checked" [binary]="true" inputId="binary"></p-checkbox>
                </td>
                <td>{{order.id}}</td>
                <td>two</td>
                <td>three</td>
                <td>£££</td>
                <td><span [class]="'order-badge order-' + order.status.toLowerCase()">five</span></td>
                <td><p-button type="button" icon="pi pi-search"></p-button></td>
              </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="7">There are no order for this product yet.</td>
              </tr>
            </ng-template>
          </p-table>
                
          </td>
      </tr>
</ng-template>

</p-table>